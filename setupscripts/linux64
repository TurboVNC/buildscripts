SCRIPTDIR=`dirname $0`

CMAKE_BUILD_TYPE=Release

if [ "$1" = "-g" ]; then
	CMAKE_BUILD_TYPE=RelWithDebInfo
	shift
fi

export CFLAGS='-Wall'
export JAVA_HOME=/opt/openjdk17

cmake -G"Unix Makefiles" -DCMAKE_BUILD_TYPE=${CMAKE_BUILD_TYPE} \
	-DCMAKE_JAVA_COMPILE_FLAGS='-target 1.7 -source 1.7 -Xlint:all,-serial,-cast,-unchecked,-rawtypes' \
	-DTVNC_INCLUDEJRE=1 -DCMAKE_INSTALL_SYSCONFDIR=/etc \
	-DPYTHON_EXECUTABLE=/usr/bin/python2 \
	.. ${1+"$@"}
